# ç®—24ç‚¹ (24 Point Game)

ä¸€ä¸ªåŸºäº Rust åç«¯å’Œ React å‰ç«¯çš„ç®—24ç‚¹æ¸¸æˆç¨‹åºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ Rust åç«¯ API æœåŠ¡
- âš›ï¸ React å‰ç«¯ç•Œé¢
- ğŸ¨ ç°ä»£åŒ–çš„æ¸å˜è‰²ç•Œé¢è®¾è®¡
- ğŸ”„ æ”¯æŒå¤šç§è¿ç®—ç¬¦ï¼ˆåŠ å‡ä¹˜é™¤ã€é˜¶ä¹˜ã€ä¹˜æ–¹ã€å¼€æ–¹ã€å¯¹æ•°ï¼‰
- ğŸ² è‡ªåŠ¨å‡ºé¢˜åŠŸèƒ½
- ğŸ“Š æ˜¾ç¤ºæ‰€æœ‰å¯èƒ½çš„è§£æ³•

## é¡¹ç›®ç»“æ„

```
calc24/
â”œâ”€â”€ Cargo.toml          # Rust é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.rs         # Rust åç«¯ API æœåŠ¡
â”œâ”€â”€ web/                # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js  # Vite é…ç½®ï¼ˆåŒ…å«ä»£ç†è®¾ç½®ï¼‰
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.jsx
â”‚       â”œâ”€â”€ App.jsx
â”‚       â”œâ”€â”€ App.css
â”‚       â””â”€â”€ components/
â”‚           â”œâ”€â”€ RangeSelector.jsx
â”‚           â”œâ”€â”€ OperatorSelector.jsx
â”‚           â”œâ”€â”€ NumberInput.jsx
â”‚           â””â”€â”€ Results.jsx
â”œâ”€â”€ start.sh            # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md
```

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. **Rust**: è®¿é—® [https://rustup.rs/](https://rustup.rs/) å®‰è£…
2. **Node.js**: è®¿é—® [https://nodejs.org/](https://nodejs.org/) å®‰è£…ï¼ˆæ¨è v18 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰

### å®‰è£…ä¾èµ–

#### åç«¯ä¾èµ–
```bash
# Rust ä¾èµ–ä¼šåœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨å®‰è£…
cargo build
```

#### å‰ç«¯ä¾èµ–
```bash
cd web
npm install
cd ..
```

### è¿è¡Œç¨‹åº

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
./start.sh
```

å¯åŠ¨è„šæœ¬ä¼šï¼š
1. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆç«¯å£ 3001ï¼‰
2. ç­‰å¾…åç«¯å°±ç»ª
3. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 5173ï¼‰
4. è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`

æŒ‰ `Ctrl+C` åœæ­¢æ‰€æœ‰æœåŠ¡ã€‚

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨

**ç»ˆç«¯ 1 - å¯åŠ¨åç«¯ï¼š**
```bash
cargo run
```

**ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯ï¼š**
```bash
cd web
npm run dev
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:5173`

## æŠ€æœ¯æ ˆ

### åç«¯
- **Rust**: ç³»ç»Ÿç¼–ç¨‹è¯­è¨€
- **actix-web**: é«˜æ€§èƒ½ Web æ¡†æ¶
- **actix-cors**: CORS ä¸­é—´ä»¶
- **tokio**: å¼‚æ­¥è¿è¡Œæ—¶
- **serde**: åºåˆ—åŒ–/ååºåˆ—åŒ–

### å‰ç«¯
- **React**: UI æ¡†æ¶
- **Vite**: æ„å»ºå·¥å…·å’Œå¼€å‘æœåŠ¡å™¨
- **Modern CSS**: æ¸å˜ã€åŠ¨ç”»ã€å“åº”å¼è®¾è®¡

## API æ¥å£

### POST /calculate
è®¡ç®—ç»™å®šæ•°å­—çš„24ç‚¹è§£æ³•

**è¯·æ±‚ä½“ï¼š**
```json
{
  "numbers": "A,2,3,9",
  "range": "basic",
  "operators": ["+", "-", "*", "/"]
}
```

**å“åº”ï¼š**
```json
{
  "solutions": [
    "(A + 2 + 3) * 9 = 24",
    "..."
  ]
}
```

### POST /generate
ç”Ÿæˆä¸€ä¸ªæœ‰è§£çš„24ç‚¹é¢˜ç›®

**è¯·æ±‚ä½“ï¼š**
```json
{
  "range": "basic",
  "operators": ["+", "-", "*", "/"]
}
```

**å“åº”ï¼š**
```json
{
  "problem": "A, 2, 3, 9"
}
```

## å¼€å‘

### åç«¯å¼€å‘
```bash
cargo watch -x run  # éœ€è¦å®‰è£… cargo-watch
```

### å‰ç«¯å¼€å‘
```bash
cd web
npm run dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

**åç«¯ï¼š**
```bash
cargo build --release
```

**å‰ç«¯ï¼š**
```bash
cd web
npm run build
```

## éƒ¨ç½²åˆ° Linux æœåŠ¡å™¨

### æ–¹æ¡ˆä¸€ï¼šå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶ + é™æ€æ–‡ä»¶ï¼ˆæ¨èï¼‰

è¿™ç§æ–¹å¼å°†å‰ç«¯æ„å»ºæˆé™æ€æ–‡ä»¶ï¼Œåç«¯ç¼–è¯‘æˆå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåç«¯åŒæ—¶æœåŠ¡ API å’Œé™æ€æ–‡ä»¶ã€‚

#### 1. æ„å»º

```bash
# ç»™æ„å»ºè„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x build.sh

# è¿è¡Œæ„å»ºè„šæœ¬
./build.sh
```

æ„å»ºè„šæœ¬ä¼šï¼š
- æ„å»ºå‰ç«¯é™æ€æ–‡ä»¶åˆ° `web/dist/`
- ç¼–è¯‘ Rust åç«¯ä¸º Linux å¯æ‰§è¡Œæ–‡ä»¶ `target/x86_64-unknown-linux-musl/release/calc24`

#### 2. éƒ¨ç½²

```bash
# ç»™éƒ¨ç½²è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x deploy.sh

# éƒ¨ç½²åˆ°æœåŠ¡å™¨
./deploy.sh user@server:/path/to/deploy

# ç¤ºä¾‹
./deploy.sh root@192.168.1.100:/opt/calc24
```

#### 3. åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ

**æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œ**
```bash
cd /opt/calc24
./calc24
```

**æ–¹å¼äºŒï¼šåå°è¿è¡Œ**
```bash
nohup ./calc24 > calc24.log 2>&1 &
```

**æ–¹å¼ä¸‰ï¼šä½¿ç”¨ systemd æœåŠ¡ï¼ˆæ¨èï¼‰**
```bash
# å¤åˆ¶æœåŠ¡æ–‡ä»¶
sudo cp calc24.service /etc/systemd/system/

# ç¼–è¾‘æœåŠ¡æ–‡ä»¶ï¼Œä¿®æ”¹è·¯å¾„å’Œç”¨æˆ·
sudo nano /etc/systemd/system/calc24.service

# é‡è½½ systemd
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start calc24

# è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl enable calc24

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status calc24

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u calc24 -f
```

#### 4. é…ç½®

**ç¯å¢ƒå˜é‡ï¼š**
- `PORT`: æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ 3001ï¼‰

**ç¤ºä¾‹ï¼š**
```bash
# ä½¿ç”¨è‡ªå®šä¹‰ç«¯å£
PORT=8080 ./calc24
```

#### 5. Nginx åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨åŸŸåæˆ– 80/443 ç«¯å£ï¼Œå¯ä»¥é…ç½® Nginxï¼š

```nginx
server {
    listen 80;
    server_name calc24.example.com;

    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### éƒ¨ç½²æ¶æ„è¯´æ˜

**å¼€å‘æ¨¡å¼ï¼š**
- åç«¯è¿è¡Œåœ¨ `127.0.0.1:3001`ï¼ˆä»…æœ¬åœ°è®¿é—®ï¼‰
- å‰ç«¯è¿è¡Œåœ¨ `localhost:5173`ï¼ˆVite å¼€å‘æœåŠ¡å™¨ï¼‰
- å‰ç«¯é€šè¿‡ä»£ç†è®¿é—®åç«¯ API

**ç”Ÿäº§æ¨¡å¼ï¼š**
- æ£€æµ‹åˆ° `web/dist` ç›®å½•æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ç”Ÿäº§æ¨¡å¼
- åç«¯è¿è¡Œåœ¨ `0.0.0.0:3001`ï¼ˆæ¥å—æ‰€æœ‰ç½‘ç»œæ¥å£çš„è¿æ¥ï¼‰
- åç«¯åŒæ—¶æœåŠ¡ API å’Œé™æ€æ–‡ä»¶
- åªéœ€è¦ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶å³å¯è¿è¡Œ

## License

MIT
